import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Airline spirit = new Airline("Spirit", 100);
        Airline united = new Airline("United Airlines", 175);
        Airline american = new Airline("American Airlines", 200);
        Airline northwest = new Airline("Northwest", 130);
        Airport ohare = new Airport("O'Hare", 10);
        Airport midway = new Airport("Midway", 8);
        Airport lax = new Airport("LAX", 15);
        Airport oakland = new Airport("Oakland", 9);
        Airport mlk = new Airport("MLK", 8);
        Airplane spirit0 = new Airplane(spirit, 120);
        Airplane united1 = new Airplane(united, 120);
        Airplane american2 = new Airplane(american, 120);
        Airplane northwest3 = new Airplane(northwest, 120);
        Scanner s = new Scanner(System.in);
        System.out.println("Welcome to Syed's Airline Reservation System!");
        int input = 0;
        outer:
        while(input != 5) {
            System.out.println("Please pick an option below by entering the corresponding number.");
            System.out.println("1. Check which airports are available for travel.\n" +
                    "2. Make a reservation.\n3. Track a flight\n4. Cancel a reservation\n5. Quit");
            input = s.nextInt();
            if (input == 1) {
                System.out.println("Currently, we provide reservations at the following airports:\n" +
                        "1. O'Hare\n2. Midway\n3. LAX\n4. Oakland\n5. MLK");
            }
            else if (input == 2) {
                System.out.println("Please enter your departure date ('MM-DD')");
                s.nextLine();
                String depart = s.nextLine();
                System.out.println("Please enter your arrival date ('MM-DD')");
                String arrive = s.nextLine();
                System.out.println("Select the airport for your departure\n" +
                        "1. O'Hare\n2. Midway\n3. LAX\n4. Oakland\n5. MLK");
                int airport = s.nextInt();
                Airport airportDepart = null;
                switch(airport) {
                    case 1:
                        airportDepart = ohare;
                        break;
                    case 2:
                        airportDepart = midway;
                        break;
                    case 3:
                        airportDepart = lax;
                        break;
                    case 4:
                        airportDepart = oakland;
                        break;
                    case 5:
                        airportDepart = mlk;
                        break;
                    case 6:
                        continue outer;
                    default:
                        System.out.println("Not a valid selection. Please choose one of the airports listed or enter '6' to return to main menu.");
                }
                System.out.println("Please select from one of the available airlines.\n1. Spirit\n2. United Airlines\n3. American Airlines\n4. Northwest");
                s.nextLine();
                int airlinenum = s.nextInt();
                Airline airline = null;
                Airplane airplane = null;
                switch(airlinenum) {
                    case 1:
                        airline = spirit;
                        airplane = spirit0;
                        break;
                    case 2:
                        airline = united;
                        airplane = united1;
                        break;
                    case 3:
                        airline = american;
                        airplane = american2;
                        break;
                    case 4:
                        airline = northwest;
                        airplane = northwest3;
                        break;
                    case 5:
                        continue outer;
                    default:
                        System.out.println("Please Enter a valid airline selection or enter 5 to return to main menu.");
                }
                System.out.println("For your flight, there are " + airplane.getAvailability() + " seats available.");
                System.out.println("This is the planes seat-layout:");
                airplane.getSeats();
                System.out.println("Please enter the row of the seat you would like.");
                s.nextLine();
                boolean correctInput = false;
                while(true) {
                    String seatRow = s.nextLine();
                    if (Integer.parseInt(seatRow) < 1 || Integer.parseInt(seatRow) > 20) {
                        System.out.println("Please enter a valid seat number.");
                        continue;
                    }
                    System.out.println("Now choose a seat.");
                    String seatLetter = s.nextLine();
                    seatLetter = seatLetter.toUpperCase();
                    if(!seatLetter.matches("^[a-f2A-F]*$")) {
                        System.out.println("You did not enter a valid seat choice, please start again.");
                        System.out.println("Please enter a valid seat number.");
                        continue;
                    }
                    String finalSeat = seatLetter + "-" + seatRow;
                    Seat customerSeat = new Seat(finalSeat);
                    if(airplane.isSeatAvailable(customerSeat)) {
                        airplane.reserveSeat(customerSeat);
                        Reservation reservation = new Reservation(depart, arrive, airportDepart, airline, customerSeat);
                        System.out.println("Great, your seat has been reserved!");
                        break;
                    }
                    else{
                        System.out.println("Sorry, that seat is taken. Enter another seat that is available.");
                        continue;
                    }
                }
            }
        }
    }
}
